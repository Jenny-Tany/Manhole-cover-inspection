<template>
    <div id="container"></div>
  </template>
  
  <script>
  import { ref, onMounted } from 'vue';
  import AMapLoader from '@amap/amap-jsapi-loader';
  
  export default {
    mounted() {
      window._AMapSecurityConfig = {
        securityJsCode: "f715472cbaeee315a3ab0db513cebefa",
      };
  
      const provinceCenterMap = {
        '广西': [108.33, 27.84],
        '北京': [116.40, 39.90],
        '天津': [117.20, 39.13],
        '上海': [121.47, 31.23],
        '重庆': [106.54, 29.59],
        '河北': [114.48, 38.03],
        '山西': [112.33, 37.86],
        '辽宁': [123.38, 41.80],
        '吉林': [125.35, 43.88],
        '黑龙江': [126.63, 45.75],
        '江苏': [118.78, 32.04],
        '浙江': [120.15, 30.28],
        '安徽': [117.27, 31.86],
        '福建': [119.30, 26.08],
        '江西': [115.89, 28.68],
        '山东': [117.00, 36.65],
        '河南': [113.65, 34.76],
        '湖北': [114.30, 30.59],
        '湖南': [112.93, 28.23],
        '广东': [113.23, 23.16],
        '海南': [110.35, 20.02],
        '四川': [104.06, 30.67],
        '贵州': [106.71, 26.57],
        '云南': [102.71, 25.04],
        '陕西': [108.95, 35.87],
        '甘肃': [103.82, 36.06],
        '青海': [101.78, 36.62],
        '台湾': [121.56, 25.03],
        '内蒙古': [115.65, 43.82],
        '广西': [108.33, 22.84],
        '西藏': [91.11, 29.65],
        '宁夏': [106.27, 38.47],
        '新疆': [87.62, 43.79],
        '香港': [114.17, 22.28],
        '澳门': [113.54, 22.19],
      };
  
      const wellCoverData = {
          '北京': {
            '北京市': 150,
          },
          '天津': {
            '天津市': 120,
          },
          '河北': {
            '石家庄市': 110,
            '唐山市': 90,
            '秦皇岛市': 70,
            '邯郸市': 80,
            '邢台市': 75,
            '保定市': 100,
            '张家口市': 65,
            '承德市': 55,
          },
          '山西': {
            '太原市': 85,
            '大同市': 70,
            '阳泉市': 60,
            '长治市': 65,
            '晋城市': 55,
            '朔州市': 50,
            '晋中市': 75,
            '运城市': 80,
          },
          '内蒙古': {
            '呼和浩特市': 95,
            '包头市': 80,
            '乌海市': 70,
            '赤峰市': 85,
            '通辽市': 65,
            '鄂尔多斯市': 75,
            '呼伦贝尔市': 90,
            '巴彦淖尔市': 60,
          },
          '辽宁': {
            '沈阳市': 120,
            '大连市': 100,
            '鞍山市': 75,
            '抚顺市': 70,
            '本溪市': 65,
            '丹东市': 60,
            '锦州市': 80,
            '营口市': 55,
          },
          '吉林': {
            '长春市': 110,
            '吉林市': 90,
            '四平市': 65,
            '辽源市': 55,
            '通化市': 60,
            '白山市': 50,
            '白城市': 45,
            '松原市': 70,
          },
          '黑龙江': {
            '哈尔滨市': 130,
            '齐齐哈尔市': 95,
            '鸡西市': 80,
            '鹤岗市': 75,
            '双鸭山市': 70,
            '大庆市': 85,
            '伊春市': 65,
            '牡丹江市': 60,
          },
          '上海': {
            '上海市': 160,
          },
          '江苏': {
            '南京市': 140,
            '无锡市': 100,
            '徐州市': 90,
            '常州市': 80,
            '苏州市': 120,
            '南通市': 75,
            '连云港市': 70,
            '淮安市': 65,
          },
          '浙江': {
            '杭州市': 150,
            '宁波市': 110,
            '温州市': 95,
            '嘉兴市': 80,
            '湖州市': 75,
            '绍兴市': 85,
            '金华市': 70,
            '衢州市': 65,
          },
          '安徽': {
            '合肥市': 120,
            '芜湖市': 90,
            '蚌埠市': 80,
            '淮南市': 70,
            '马鞍山市': 75,
            '淮北市': 65,
            '铜陵市': 60,
            '安庆市': 85,
          },
          '福建': {
            '福州市': 130,
            '厦门市': 100,
            '莆田市': 75,
            '三明市': 70,
            '泉州市': 90,
            '漳州市': 80,
            '南平市': 65,
            '龙岩市': 60,
          },
          '江西': {
            '南昌市': 110,
            '景德镇市': 85,
            '萍乡市': 70,
            '九江市': 95,
            '新余市': 80,
            '鹰潭市': 60,
            '赣州市': 75,
            '吉安市': 65,
          },
          '山东': {
            '济南市': 140,
            '青岛市': 120,
            '淄博市': 85,
            '枣庄市': 70,
            '东营市': 75,
            '烟台市': 95,
            '潍坊市': 80,
            '济宁市': 90,
          },
          '河南': {
            '郑州市': 150,
            '开封市': 80,
            '洛阳市': 90,
            '平顶山市': 75,
            '安阳市': 70,
            '鹤壁市': 65,
            '新乡市': 85,
            '焦作市': 60,
          },
          '湖北': {
            '武汉市': 140,
            '黄石市': 80,
            '十堰市': 70,
            '宜昌市': 90,
            '襄阳市': 75,
            '鄂州市': 65,
            '荆门市': 60,
            '孝感市': 85,
          },
          '湖南': {
            '长沙市': 130,
            '株洲市': 90,
            '湘潭市': 80,
            '衡阳市': 75,
            '邵阳市': 70,
            '岳阳市': 85,
            '常德市': 65,
            '张家界市': 60,
          },
          '广东': {
            '广州市': 160,
            '韶关市': 90,
            '深圳市': 130,
            '珠海市': 80,
            '汕头市': 75,
            '佛山市': 70,
            '江门市': 65,
            '湛江市': 85,
          },
          '广西': {
            '南宁市': 110,
            '柳州市': 95,
            '桂林市': 85,
            '梧州市': 80,
            '北海市': 75,
            '防城港市': 65,
            '钦州市': 70,
            '贵港市': 60,
          },
          '海南': {
            '海口市': 80,
            '三亚市': 70,
            '三沙市': 60,
            '儋州市': 50,
            '五指山市': 45,
            '琼海市': 55,
            '文昌市': 65,
            '万宁市': 75,
          },
          '重庆': {
            '重庆市': 130,
          },
          '四川': {
            '成都市': 155,
            '自贡市': 85,
            '攀枝花市': 80,
            '泸州市': 75,
            '德阳市': 70,
            '绵阳市': 90,
            '广元市': 60,
            '遂宁市': 65,
          },
          '贵州': {
            '贵阳市': 100,
            '六盘水市': 70,
            '遵义市': 80,
            '安顺市': 65,
            '铜仁市': 60,
            '黔西南布依族苗族自治州': 50,
            '毕节市': 75,
            '黔东南苗族侗族自治州': 55,
          },
          '云南': {
            '昆明市': 120,
            '曲靖市': 80,
            '玉溪市': 70,
            '保山市': 75,
            '昭通市': 65,
            '丽江市': 60,
            '普洱市': 55,
            '临沧市': 50,
          },
          '西藏': {
            '拉萨市': 90,
            '日喀则市': 70,
            '昌都市': 65,
            '林芝市': 60,
            '山南市': 55,
            '那曲市': 50,
            '阿里地区': 45,
          },
          '陕西': {
            '西安市': 140,
            '铜川市': 70,
            '宝鸡市': 80,
            '咸阳市': 90,
            '渭南市': 75,
            '延安市': 85,
            '汉中市': 65,
            '榆林市': 60,
          },
          '甘肃': {
            '兰州市': 100,
            '嘉峪关市': 65,
            '金昌市': 60,
            '白银市': 70,
            '天水市': 75,
            '武威市': 55,
            '张掖市': 50,
            '平凉市': 80,
          },
          '青海': {
            '西宁市': 80,
            '海东市': 60,
            '海北藏族自治州': 50,
            '黄南藏族自治州': 55,
            '海南藏族自治州': 65,
            '果洛藏族自治州': 70,
            '玉树藏族自治州': 75,
            '海西蒙古族藏族自治州': 45,
          },
          '宁夏': {
            '银川市': 80,
            '石嘴山市': 60,
            '吴忠市': 55,
            '固原市': 50,
            '中卫市': 45,
          },
          '新疆': {
            '乌鲁木齐市': 120,
            '克拉玛依市': 70,
            '吐鲁番市': 65,
            '哈密市': 60,
            '昌吉回族自治州': 75,
            '博尔塔拉蒙古自治州': 55,
            '巴音郭楞蒙古自治州': 50,
            '阿克苏地区': 80,
          },
          '台湾': {
            '台北市': 90,
            '高雄市': 80,
            '台中市': 70,
            '基隆市': 65,
            '台南市': 75,
            '新竹市': 60,
            '嘉义市': 55,
          },
          '香港': {
            '香港特别行政区': 100,
          },
          '澳门': {
            '澳门特别行政区': 95,
          }
        };

    AMapLoader.load({
      key: "829635121fbade2893b65c9b39f5b3af",
      version: "2.0",
    })
      .then((AMap) => {
        const map = new AMap.Map("container", {
          center: provinceCenterMap[this.$route.query.name] || [108.33, 22.84], // 根据省份设置地图中心点
          zoom: 7, // 设置地图缩放级别
        });

        // 输出接收到的参数
        console.log('接收到的参数：', this.$route.query.name);
    
        Object.keys(wellCoverData).forEach((province) => {
          const cities = wellCoverData[province];
          Object.keys(cities).forEach((city) => {
            AMap.plugin('AMap.Geocoder', function() {
              const geocoder = new AMap.Geocoder({});
              geocoder.getLocation(city, function(status, result) {
                if (status === 'complete' && result.geocodes.length) {
                  const position = result.geocodes[0].location;
                  const marker = new AMap.Marker({
                    position: [position.lng, position.lat],
                    title: `${city} - 井盖数量：${cities[city]}`,
                  });
                  marker.setMap(map);
                } else {
                  console.error('获取经纬度失败');
                }
              });
            });
          });
        });
        console.log('接收到的参数：', this.$route.query.name);
      })
      .catch((e) => {
        console.error(e);
      });
  },
};
  </script>
  
  <style>
  html,
  body,
  #container {
    width: 100%;
    height: 100%;
  }
  </style>